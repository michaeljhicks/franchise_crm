<%= form_with(model: [@customer, @machine, @job]) do |form| %>
  <% if job.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(job.errors.count, "error") %> prohibited this job from being saved:</h2>

      <ul>
        <% job.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <%= form.label :scheduled_date_time, style: "display: block" %>
    <%= form.datetime_field :scheduled_date_time %>
  </div>

  <div>
    <%= form.label :completed_date_time, style: "display: block" %>
    <%= form.datetime_field :completed_date_time %>
  </div>

  <div>
    <%= form.label :job_type %>
    <%= form.select :job_type, Job.job_types.keys.map { |k| [k.humanize.titleize, k] } %>
  </div>

  <div>
    <%= form.label :status %>
    <%= form.select :status, Job.statuses.keys.map { |k| [k.humanize.titleize, k] } %>
  </div>

  <div>
    <%= form.label :contractor_notes, "External Notes (Visible to Customer)" %>
    <%= form.text_area :contractor_notes, rows: 4 %>
  </div>

  <div>
    <%= form.label :internal_notes, "Internal Notes (For Team Only)" %>
    <%= form.text_area :internal_notes, rows: 4 %>
  </div>
  
  <div>
    <%= form.label :contractor_id %>
    <%= form.collection_select :contractor_id, @contractors, :id, :name, prompt: "Select a contractor" %>
  </div>

  <div>
    <%= form.submit %>
  </div>
<% end %>
