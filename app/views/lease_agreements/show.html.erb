<p style="color: green"><%= notice %></p>

<header style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
  <div>
    <h1>Lease Agreement Details</h1>
    <p>
      For <strong><%= link_to @lease_agreement.customer.business_name, @lease_agreement.customer %></strong> | 
      Machine: <strong><%= link_to @lease_agreement.machine.machine_model, customer_machine_path(@lease_agreement.customer, @lease_agreement.machine) %></strong>
    </p>
  </div>
  <div role="group">
    <%= link_to "Edit", edit_lease_agreement_path(@lease_agreement), role: "button", class: "secondary" %>
    <%= link_to "Generate Google Doc", generate_document_lease_agreement_path(@lease_agreement), 
            target: "_blank", 
            role: "button" 
    %>
  </div>
</header>


<article>
  <div class="grid">
    <div>
      <strong>Start Date:</strong><br>
      <%= @lease_agreement.lease_start_date&.strftime("%B %d, %Y") %>
    </div>
    <div>
      <strong>End Date:</strong><br>
      <%= @lease_agreement.lease_end_date&.strftime("%B %d, %Y") || 'Active / No End Date' %>
    </div>
    <div>
      <strong>Monthly Lease Rate:</strong><br>
      <%= number_to_currency(@lease_agreement.lease_rate) %>
    </div>
  </div>



  <% if @lease_agreement.lease_end_date.present? %>
    <hr>
    <strong>Lease Timeline</strong>
    

    <progress value="<%= @lease_agreement.completion_percentage %>" max="100"></progress>
    
    <div class="grid">
      <div>
        <small><%= @lease_agreement.days_elapsed %> days into lease</small>
      </div>
      <div style="text-align: right;">
        <small><%= @lease_agreement.days_remaining %> days remaining</small>
      </div>
    </div>
  <% end %>

</article>

<br>

<div>
  <%= link_to "Back to lease agreements", lease_agreements_path %>

  <div style="margin-top: 2rem;">
    <%= button_to "Destroy this lease agreement", @lease_agreement, 
                  method: :delete, 
                  form: { data: { turbo_confirm: "Are you sure you want to permanently delete this lease agreement?" } },
                  class: "contrast" 
    %>
  </div>
</div>

<style>
  progress {
    display: block;
    width: 100%;
    height: 1.25rem;
    border-radius: 9999px;
    border: none;
    background-color: #e5e7eb; /* A light gray background */
  }
  progress::-webkit-progress-bar {
    background-color: #e5e7eb;
    border-radius: 9999px;
  }
  progress::-webkit-progress-value {
    background-color: #3B82F6; /* The blue color we use elsewhere */
    border-radius: 9999px;
  }
  progress::-moz-progress-bar {
    background-color: #3B82F6; /* The blue color we use elsewhere */
    border-radius: 9999px;
  }
</style>